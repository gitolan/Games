
-- Import library for HTTP requests
local http = require("socket.http")
local ltn12 = require("ltn12")

-- Function to get HWID using GetClientId() method
function getHWID()
    -- Get HWID using GetClientId() method
    local HWID = game:GetService("RbxAnalyticsService"):GetClientId()
    return HWID
end

-- Function to write HWID to GitHub
function writeHWIDtoGitHub(hwid)
    -- Set the repository information
    local username = "gitolan"
    local repo = "Games"
    local filePath = "Database/hwid.txt"
    
    -- Set the content you want to write to the file
    local content = hwid
    
    -- GitHub API endpoint
    local url = string.format("https://api.github.com/repos/%s/%s/contents/%s", username, repo, filePath)
    
    -- Construct the request body
    local requestBody = string.format('{"message": "Updating HWID", "content": "%s"}', content)
    
    -- Send HTTP request to update file on GitHub
    local response_body = {}
    local res, code, response_headers = http.request{
        url = url,
        method = "PUT",
        headers = {
            ["Content-Type"] = "application/json",
            ["Authorization"] = "token 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",
            ["User-Agent"] = "Lua"
        },
        source = ltn12.source.string(requestBody),
        sink = ltn12.sink.table(response_body)
    }
    
    -- Check if the request was successful
    if code == 200 then
        print("HWID successfully updated on GitHub!")
    else
        print("Failed to update HWID on GitHub. Error code:", code)
    end
end

-- Get HWID
local hwid = getHWID()

-- Write HWID to GitHub
writeHWIDtoGitHub(hwid)
